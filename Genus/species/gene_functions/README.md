# Gene Function and Phenotype

### NOTE: This README and the other files in this directory constitute a Request For Objections regarding formats, filenames, etc. Once these are acceptible, the example files would go into the Data Store-proper, and trimmed-down examples would be left here in datastore-specifications.

Experimentally-based information about gene function and plant phenotype, and the associated supporting references, are stored in three files per species, in a **gene_functions** directory.
Those files are the following - with "gensp" being the abbreviation for the present **gen**us and **sp**ecies:
- gensp.functions.yml
- gensp.citations.txt   (Note the "txt" extension; I propose this to be uncompressed. The alternative would be .tsv, compressed)
- gensp.references.txt  (Note the "txt" extension; I propose this to be uncompressed. The alternative would be .tsv, compressed)

The **gensp.functions.yml** file is produced by a curator (with some assistance from the get_citations.pl script; see below*), and represents minimal essential information about a gene and its function as described by literature cited in the file.

The **gensp.citations.txt** file is generated by the script **get_citations.pl**, which takes gensp.functions.yml as input. This file has five fields: DOI, PubMedID, PubMedCentralID, Author-Author-Year, and full citation. (\*Note that the **get_citations.pl** script can help fill in reference elements in gensp.functions.yml -- specifically, adding doi given the pmid, or the pmid given the doi.)

The **gensp.references.txt** file is generated by the script **get_references.pl**, which takes the gensp.citations.txt as input. This file has the [MEDLINE-format](https://www.nlm.nih.gov/bsd/mms/medlineelements.html) publication information (authors, title, abstract, etc.) for the citations in gensp.citations.txt.

The functions.yml file contains one or more yaml "documents", indicated by three leading dashes (`---`) at the top of each document. Each holds information about one gene with experimentally-established function or trait association. A document might also be thought of as a "function card", with information about one gene for which a phenotypic effect has been established. 

There are nine top-level keys - two of which contain an array of key-value pairs. Note that if a value is not available for a (non-required) key, the key should simply be omitted (i.e. don't include the key without a value or with a blank or null in the value field).

```
---
classical_locus: E2
gene_symbols:
  - GmGI
gene_symbol_long: Earliness 2
gene_model_pub_name: Glyma.10G221500
gene_model_full_id: glyma.Wm82.gnm2.ann1.Glyma.10G221500
confidence: 5
comments: 
  - Mutational and association analysis relative to classical locus.
traits:
  - entity_name: flowering time
    entity: TO:0002616
  - relation_name: negatively regulates
    relation: RO:0002212
  - entity_name: days to maturity
    entity: TO:0000469
  - relation_name: negatively regulates
    relation: RO:0002212
references:
  - citation: Tsubokura, Watanabe et al., 2013
    doi: 10.1093/aob/mct269
    pmid: 24284817
  - citation: Dietz, Chan et al., 2023
    doi: 10.3389/fpls.2022.889066
    pmid: 35574141
  - citation: Lin, Liu et al., 2021
    doi: 10.1111/jipb.13021
    pmid: 33090664
```

The **classical_locus** block is optional. It holds the name of a locus that has been defined in literature about this species, typically naming a mapped phenotype. For example, in soybean, the "E2" locus is one of several named "earliness" loci. In pea, the "I" locus was used by Mendel to name the yellow-or-green seed-color locus ("I" indicating  yellow and "i" indicating green). This block holds a single value.

The **gene_symbols** block is optional. It holds the name of a locus as described in literature about a mapped trait. This block may hold multiple values, since it is not uncommon for different publications to use different locus names. The first listed name will be considered "preferred."

The **gene_symbol_long** block is optional. It holds the "spelled out" or descriptive name of the gene symbol.

The **gene_model_pub_name** block is required. It holds the name of a gene as identified in the first citation from the "references" section. This gene name may be from any annotation. It will typically be "bare," without indication of assembly or annotation versions.

The **gene_model_full_id** block is required. It holds the fully-qualified gene ID, with components "gensp.Accession.gnm#.ann#.gene_ID". The "gene_ID" may be the same as **gene_model_pub_name**, but may be different if a corresponding and preferable gene model is available from another assembly and/or annotation. The purpose of this ID is to enable linking this gene to other resources at SoyBase/LIS/PeanutBase.

The **comments** block is for unstructured text, if needed for curatorial comments or other purposes.

The **confidence** block is to have values [1-5]. This field indicates level of experimental support, with 5 being the strongest -- typically consisting of evidence at the level of a genetic complementation test, or otherwise observed as a mutant phenotype (experimental evidence code IMP) associated with the mutated form of the indicated gene. A level of 3 would be strong associational support, but lacking experimental lab validation such as genetic complementation. Levels 1 and 2 would be high-throughput evidence, and generally will NOT be collected in the SoyBase/LIS/PeanutBase projects. Papers that report lists of "candidate genes" in the vicinity of a GWAS or QTL region would be level 1 or 2 support, and should generally not be collected here.

The **traits** block must contain at least one "entity" key with a valid ontology accession. Trait ontology is preferred where possible. Optionally, a "relation" key with a relation ontology may be associated with the entity ontology. The association between entity and relation ontology terms is established by proximity: entity and term followed by relation and term. Optionally (for the benefit of curators), a comment (marked by "#") may be added to the ontology-term lines.

The **references** block contains one or more blocks of citations, each containing three key-value pairs: "citation", "doi", and "pmid". Of these, the doi is required (some publications lack a pmid, but all should have a doi). The pmid should be provided if available (the **get_citations.pl** will do this if the curator does not). The citation should be in one of the following forms (depending on whether there are one, two, or three-or-more authors):  
```
  LastName, YEAR
  LastName, LastName, YEAR
  LastName, LastName et al., YEAR
```

